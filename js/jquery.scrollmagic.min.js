(function($){ScrollMagic=function(options){"use strict";var NAMESPACE="ScrollMagic",DEFAULT_OPTIONS={container:window,vertical:true,globalSceneOptions:{},loglevel:2,viewPortFixed:false,viewPortSize:0};var ScrollMagic=this,_options=$.extend({},DEFAULT_OPTIONS,options),_sceneObjects=[],_updateScenesOnNextTick=false,_scrollPos=0,_scrollDirection="PAUSED",_isDocument=true,_viewPortSize=0,_tickerUsed=false,_enabled=true;var construct=function(){$.each(_options,function(key,value){if(!DEFAULT_OPTIONS.hasOwnProperty(key)){log(2,'WARNING: Unknown option "'+key+'"');delete _options[key]}});_options.container=$(_options.container).first();if(_options.container.length===0){log(1,"ERROR creating object ScrollMagic: No valid scroll container supplied");return}_isDocument=!$.contains(document,_options.container.get(0));_viewPortSize=_options.viewPortFixed?_options.viewPortSize:_options.vertical?_options.container.height():_options.container.width();_options.container.on("scroll resize",onChange);try{TweenLite.ticker.addEventListener("tick",onTick);_tickerUsed=true}catch(e){_options.container.on("scroll resize",onTick);_tickerUsed=false}log(3,"added new "+NAMESPACE+" controller")};var getScrollPos=function(){return _options.vertical?_options.container.scrollTop():_options.container.scrollLeft()};var onTick=function(e){if(_updateScenesOnNextTick&&_enabled){var scenesToUpdate=$.isArray(_updateScenesOnNextTick)?_updateScenesOnNextTick:_sceneObjects,oldScrollPos=_scrollPos;_scrollPos=ScrollMagic.scrollPos();var deltaScroll=_scrollPos-oldScrollPos;_scrollDirection=deltaScroll===0?"PAUSED":deltaScroll>0?"FORWARD":"REVERSE";ScrollMagic.updateScene(scenesToUpdate,true);if(scenesToUpdate.length===0&&_options.loglevel>=3){log(3,"updating 0 Scenes (nothing added to controller)")}_updateScenesOnNextTick=false}};var onChange=function(e){if(e.type=="resize"){_viewPortSize=_options.viewPortFixed?_options.viewPortSize:_options.vertical?_options.container.height():_options.container.width()}_updateScenesOnNextTick=true};var log=function(loglevel,output){if(_options.loglevel>=loglevel){var prefix="("+NAMESPACE+") ->",args=Array.prototype.splice.call(arguments,1),func=Function.prototype.bind.call(debug,window);args.unshift(loglevel,prefix);func.apply(window,args)}};this.addScene=function(ScrollScene){if($.isArray(ScrollScene)){$.each(ScrollScene,function(index,scene){ScrollMagic.addScene(scene)})}else{if(ScrollScene.parent()!=ScrollMagic){ScrollScene.addTo(ScrollMagic)}else if($.inArray(_sceneObjects,ScrollScene)==-1){_sceneObjects.push(ScrollScene);$.each(_options.globalSceneOptions,function(key,value){if(ScrollScene[key]){ScrollScene[key].call(ScrollScene,value)}});log(3,"added Scene ("+_sceneObjects.length+" total)")}}return ScrollMagic};this.removeScene=function(ScrollScene){if($.isArray(ScrollScene)){$.each(ScrollScene,function(index,scene){ScrollMagic.removeScene(scene)})}else{var index=$.inArray(ScrollScene,_sceneObjects);if(index>-1){_sceneObjects.splice(index,1);ScrollScene.remove();log(3,"removed Scene ("+_sceneObjects.length+" total)")}}return ScrollMagic};this.updateScene=function(ScrollScene,immediately){if($.isArray(ScrollScene)){$.each(ScrollScene,function(index,scene){log(3,"updating Scene "+(index+1)+"/"+ScrollScene.length+" ("+_sceneObjects.length+" total)");ScrollMagic.updateScene(scene,immediately)})}else{if(immediately){ScrollScene.update(true)}else{if(!$.isArray(_updateScenesOnNextTick)){_updateScenesOnNextTick=[]}if($.inArray(ScrollScene,_updateScenesOnNextTick)==-1){_updateScenesOnNextTick.push(ScrollScene)}}}return ScrollMagic};this.update=function(immediately){onChange({type:"resize"});if(immediately){onTick()}return ScrollMagic};this.scrollPos=function(newScrollPos){if(!arguments.length){return getScrollPos.call(ScrollMagic)}else{if(!$.isFunction(newScrollPos)){newScrollPos=function(){return newScrollPos}}getScrollPos=newScrollPos}return ScrollMagic};this.viewPortSize=function(_options){return function(newViewPortSize){if(!arguments.length){return _viewPortSize}else{_options.viewPortSize=_viewPortSize=newViewPortSize}return ScrollMagic}}(_options);this.info=function(about){var values={size:_viewPortSize,vertical:_options.vertical,scrollPos:_scrollPos,scrollDirection:_scrollDirection,container:_options.container,isDocument:_isDocument};if(!arguments.length){return values}else if(values[about]!==undefined){return values[about]}else{log(1,'ERROR: option "'+about+'" is not available');return}};this.loglevel=function(newLoglevel){if(!arguments.length){return _options.loglevel}else if(_options.loglevel!=newLoglevel){_options.loglevel=newLoglevel}return ScrollMagic};this.enabled=function(newState){if(!arguments.length){return _enabled}else if(_enabled!=newState){_enabled=!!newState;ScrollMagic.updateScene(_sceneObjects,true)}return ScrollMagic};this.destroy=function(resetScenes){while(_sceneObjects.length>0){var scene=_sceneObjects[_sceneObjects.length-1];scene.destroy(resetScenes)}_options.container.off("scroll resize",onChange);if(_tickerUsed){TweenLite.ticker.removeEventListener("tick",onTick)}else{_options.container.off("scroll resize",onTick)}log(3,"destroyed "+NAMESPACE+" (reset: "+(resetScenes?"true":"false")+")");return null};construct();return ScrollMagic};ScrollScene=function(options){"use strict";var TRIGGER_HOOK_STRINGS=["onCenter","onEnter","onLeave"],NAMESPACE="ScrollScene",DEFAULT_OPTIONS={duration:0,offset:0,triggerElement:null,triggerHook:TRIGGER_HOOK_STRINGS[0],reverse:true,tweenChanges:false,loglevel:2};var ScrollScene=this,_options=$.extend({},DEFAULT_OPTIONS,options),_state="BEFORE",_progress=0,_scrollOffset={start:0,end:0},_enabled=true,_parent,_tween,_pin,_pinOptions;var construct=function(){checkOptionsValidity();ScrollScene.on("change.internal",function(e){checkOptionsValidity();if(e.what!="loglevel"&&e.what!="tweenChanges"){if(e.what!="reverse"&&_options.triggerElement===null){updateScrollOffset()}ScrollScene.update();if(_state!=="DURING"&&e.what=="duration"||_state==="AFTER"&&_options.duration===0){updatePinState()}}});ScrollScene.on("progress.internal",function(e){updateTweenProgress();updatePinState()})};var log=function(loglevel,output){if(_options.loglevel>=loglevel){var prefix="("+NAMESPACE+") ->",args=Array.prototype.splice.call(arguments,1),func=Function.prototype.bind.call(debug,window);args.unshift(loglevel,prefix);func.apply(window,args)}};var checkOptionsValidity=function(){$.each(_options,function(key,value){if(!DEFAULT_OPTIONS.hasOwnProperty(key)){log(2,'WARNING: Unknown option "'+key+'"');delete _options[key]}});_options.duration=parseFloat(_options.duration);if(!$.isNumeric(_options.duration)||_options.duration<0){log(1,'ERROR: Invalid value for option "duration":',_options.duration);_options.duration=DEFAULT_OPTIONS.duration}_options.offset=parseFloat(_options.offset);if(!$.isNumeric(_options.offset)){log(1,'ERROR: Invalid value for option "offset":',_options.offset);_options.offset=DEFAULT_OPTIONS.offset}if(_options.triggerElement!==null&&$(_options.triggerElement).length===0){log(1,'ERROR: Element defined in option "triggerElement" was not found:',_options.triggerElement);_options.triggerElement=DEFAULT_OPTIONS.triggerElement}if(!$.isNumeric(_options.triggerHook)&&$.inArray(_options.triggerHook,TRIGGER_HOOK_STRINGS)==-1){log(1,'ERROR: Invalid value for option "triggerHook": ',_options.triggerHook);_options.triggerHook=DEFAULT_OPTIONS.triggerHook}if(!$.isNumeric(_options.loglevel)||_options.loglevel<0||_options.loglevel>3){var wrongval=_options.loglevel;_options.loglevel=DEFAULT_OPTIONS.loglevel;log(1,'ERROR: Invalid value for option "loglevel":',wrongval)}if(_tween&&_parent&&_options.triggerElement&&_options.loglevel>=2){var triggerTweens=_tween.getTweensOf($(_options.triggerElement)),vertical=_parent.info("vertical");$.each(triggerTweens,function(index,value){var tweenvars=value.vars.css||value.vars,condition=vertical?tweenvars.top!==undefined||tweenvars.bottom!==undefined:tweenvars.left!==undefined||tweenvars.right!==undefined;if(condition){log(2,"WARNING: Tweening the position of the trigger element affects the scene timing and should be avoided!");return false}})}};var updateScrollOffset=function(){_scrollOffset={start:ScrollScene.triggerOffset()};if(_parent){_scrollOffset.start-=_parent.info("size")*ScrollScene.triggerHook()}_scrollOffset.end=_scrollOffset.start+_options.duration};var updateTweenProgress=function(to){var progress=to>=0&&to<=1?to:_progress;if(_tween){if(_tween.repeat()===-1){if((_state==="DURING"||_state==="AFTER"&&_options.duration===0)&&_tween.paused()){_tween.play()}else if(_state!=="DURING"&&!_tween.paused()){_tween.pause()}else{return false}}else if(progress!=_tween.progress()){if(_options.duration===0){if(_state=="AFTER"){_tween.play()}else{_tween.reverse()}}else{if(_options.tweenChanges){_tween.tweenTo(progress*_tween.duration())}else{_tween.progress(progress).pause()}}}else{return false}return true}else{return false}};var updatePinState=function(forceUnpin){if(_pin&&_parent){var containerInfo=_parent.info();if(!forceUnpin&&(_state==="DURING"||_state==="AFTER"&&_options.duration===0)){if(_pin.css("position")!="fixed"){_pin.css("position","fixed");updatePinSpacerSize()}var fixedPos=getOffset(_pinOptions.spacer,true),scrollDistance=_options.reverse||_options.duration===0?containerInfo.scrollPos-_scrollOffset.start:Math.round(_progress*_options.duration*10)/10;fixedPos.top-=parseFloat(_pinOptions.spacer.css("margin-top"));fixedPos[containerInfo.vertical?"top":"left"]+=scrollDistance;_pin.css({top:fixedPos.top,left:fixedPos.left})}else{var newCSS={position:_pinOptions.inFlow?"relative":"absolute",top:0,left:0},change=_pin.css("position")!=newCSS.position;if(!_pinOptions.pushFollowers){newCSS[containerInfo.vertical?"top":"left"]=_options.duration*_progress}else{if(_state==="AFTER"&&parseFloat(_pinOptions.spacer.css("padding-top"))===0){change=true}else if(_state==="BEFORE"&&parseFloat(_pinOptions.spacer.css("padding-bottom"))===0){change=true}}_pin.css(newCSS);if(change){updatePinSpacerSize()}}}};var updatePinSpacerSize=function(){if(_pin&&_parent&&_pinOptions.inFlow){var after=_state==="AFTER",before=_state==="BEFORE",during=_state==="DURING",pinned=_pin.css("position")=="fixed",vertical=_parent.info("vertical"),$spacercontent=_pinOptions.spacer.children().first(),marginCollapse=$.inArray(_pinOptions.spacer.css("display"),["block","flex","list-item","table","-webkit-box"])>-1,css={};if(marginCollapse){css["margin-top"]=before||during&&pinned?_pin.css("margin-top"):"auto";css["margin-bottom"]=after||during&&pinned?_pin.css("margin-bottom"):"auto"}else{css["margin-top"]=css["margin-bottom"]="auto"}if(_pinOptions.relSize.width){if(pinned){if($(window).width()==_pinOptions.spacer.parent().width()){_pin.css("width","inherit")}else{_pin.css("width",_pinOptions.spacer.width())}}else{_pin.css("width","100%")}}else{css["min-width"]=$spacercontent.outerWidth(true);css.width=pinned?css["min-width"]:"auto"}if(_pinOptions.relSize.height){if(pinned){if($(window).height()==_pinOptions.spacer.parent().height()){_pin.css("height","inherit")}else{_pin.css("height",_pinOptions.spacer.height())}}else{_pin.css("height","100%")}}else{css["min-height"]=$spacercontent.outerHeight(!marginCollapse);css.height=pinned?css["min-height"]:"auto"}if(_pinOptions.pushFollowers){css["padding"+(vertical?"Top":"Left")]=_options.duration*_progress;css["padding"+(vertical?"Bottom":"Right")]=_options.duration*(1-_progress)}_pinOptions.spacer.css(css)}};var updatePinInContainer=function(e){if(_parent&&_pin&&_state==="DURING"){if(!_parent.info("isDocument")){updatePinState()}}};var updateRelativePinSpacer=function(e){if(_parent&&_pin&&(_state==="DURING"||_state==="AFTER"&&_options.duration===0)&&(_pinOptions.relSize.width&&$(window).width()!=_pinOptions.spacer.parent().width()||_pinOptions.relSize.height&&$(window).height()!=_pinOptions.spacer.parent().height())){updatePinSpacerSize()}};this.parent=function(){return _parent};this.duration=function(newDuration){if(!arguments.length){return _options.duration}else if(_options.duration!=newDuration){_options.duration=newDuration;ScrollScene.trigger("change",{what:"duration",newval:newDuration})}return ScrollScene};this.offset=function(newOffset){if(!arguments.length){return _options.offset}else if(_options.offset!=newOffset){_options.offset=newOffset;ScrollScene.trigger("change",{what:"offset",newval:newOffset})}return ScrollScene};this.triggerElement=function(newTriggerElement){if(!arguments.length){return _options.triggerElement}else if(_options.triggerElement!=newTriggerElement){_options.triggerElement=newTriggerElement;ScrollScene.trigger("change",{what:"triggerElement",newval:newTriggerElement})}return ScrollScene};this.triggerHook=function(newTriggerHook){if(!arguments.length){var triggerPoint;if($.isNumeric(_options.triggerHook)){triggerPoint=_options.triggerHook}else{switch(_options.triggerHook){case"onCenter":triggerPoint=.5;break;case"onLeave":triggerPoint=0;break;case"onEnter":default:triggerPoint=1;break}}return triggerPoint}else if(_options.triggerHook!=newTriggerHook){_options.triggerHook=newTriggerHook;ScrollScene.trigger("change",{what:"triggerHook",newval:newTriggerHook})}return ScrollScene};this.reverse=function(newReverse){if(!arguments.length){return _options.reverse}else if(_options.reverse!=newReverse){_options.reverse=newReverse;ScrollScene.trigger("change",{what:"reverse",newval:newReverse})}return ScrollScene};this.tweenChanges=function(newTweenChanges){if(!arguments.length){return _options.tweenChanges}else if(_options.tweenChanges!=newTweenChanges){_options.tweenChanges=newTweenChanges;ScrollScene.trigger("change",{what:"tweenChanges",newval:newTweenChanges})}return ScrollScene};this.loglevel=function(newLoglevel){if(!arguments.length){return _options.loglevel}else if(_options.loglevel!=newLoglevel){_options.loglevel=newLoglevel;ScrollScene.trigger("change",{what:"loglevel",newval:newLoglevel})}return ScrollScene};this.state=function(){return _state};this.startPosition=function(){return this.triggerOffset()};this.triggerOffset=function(){var pos=_options.offset;if(_parent){var containerInfo=_parent.info();if(_options.triggerElement===null){pos+=containerInfo.size*ScrollScene.triggerHook()}else{var element=$(_options.triggerElement).first(),containerOffset=getOffset(_parent.info("container"));while(element.parent().data("ScrollMagicPinSpacer")){element=element.parent()}var elementOffset=getOffset(element);if(!containerInfo.isDocument){containerOffset.top-=containerInfo.scrollPos;containerOffset.left-=containerInfo.scrollPos}pos+=containerInfo.vertical?elementOffset.top-containerOffset.top:elementOffset.left-containerOffset.left}}return pos};this.scrollOffset=function(){return _scrollOffset.start};this.update=function(immediately){if(_parent){if(immediately){if(_parent.enabled()&&_enabled){var scrollPos=_parent.info("scrollPos"),newProgress;if(_options.triggerElement!==null){updateScrollOffset()}if(_options.duration>0){newProgress=(scrollPos-_scrollOffset.start)/(_scrollOffset.end-_scrollOffset.start)}else{newProgress=scrollPos>=_scrollOffset.start?1:0}ScrollScene.trigger("update",{startPos:_scrollOffset.start,endPos:_scrollOffset.end,scrollPos:scrollPos});ScrollScene.progress(newProgress)}else if(_pin&&_pin.css("position")=="fixed"){updatePinState(true)}}else{_parent.updateScene(ScrollScene,false)}}return ScrollScene};this.progress=function(progress){if(!arguments.length){return _progress}else{var doUpdate=false,oldState=_state,scrollDirection=_parent?_parent.info("scrollDirection"):"PAUSED";if(progress<=0&&_state!=="BEFORE"&&(progress>=_progress||_options.reverse)){_progress=0;_state="BEFORE";doUpdate=true}else if(progress>0&&progress<1&&(progress>=_progress||_options.reverse)){_progress=progress;_state="DURING";doUpdate=true}else if(progress>=1&&_state!=="AFTER"){_progress=1;_state="AFTER";doUpdate=true}else if(_state==="DURING"&&!_options.reverse){updatePinState()}if(doUpdate){var eventVars={progress:_progress,state:_state,scrollDirection:scrollDirection},stateChanged=_state!=oldState,instantReverse=_state==="BEFORE"&&_options.duration===0;if(stateChanged){if(_state==="DURING"||_options.duration===0){ScrollScene.trigger("enter",eventVars)}if(_state==="BEFORE"||oldState==="BEFORE"){ScrollScene.trigger(instantReverse?"end":"start",eventVars)}}ScrollScene.trigger("progress",eventVars);if(stateChanged){if(_state==="AFTER"||oldState==="AFTER"){ScrollScene.trigger(instantReverse?"start":"end",eventVars)}if(_state!=="DURING"||_options.duration===0){ScrollScene.trigger("leave",eventVars)}}}return ScrollScene}};this.setTween=function(TweenMaxObject){if(_tween){ScrollScene.removeTween()}try{_tween=new TimelineMax({smoothChildTiming:true}).add(TweenMaxObject).pause()}catch(e){log(1,"ERROR calling method 'setTween()': Supplied argument is not a valid TweenMaxObject")}finally{if(TweenMaxObject.repeat){if(TweenMaxObject.repeat()===-1){_tween.repeat(-1);_tween.yoyo(TweenMaxObject.yoyo())}}checkOptionsValidity();log(3,"added tween");updateTweenProgress();return ScrollScene}};this.removeTween=function(reset){if(_tween){if(reset){updateTweenProgress(0)}_tween.kill();_tween=undefined;log(3,"removed tween (reset: "+(reset?"true":"false")+")")}return ScrollScene};this.setPin=function(element,settings){var defaultSettings={pushFollowers:true,spacerClass:"scrollmagic-pin-spacer"};settings=$.extend({},defaultSettings,settings);element=$(element).first();if(element.length===0){log(1,"ERROR calling method 'setPin()': Invalid pin element supplied.");return ScrollScene}else if(element.css("position")=="fixed"){log(1,"ERROR: Pin does not work with elements that are positioned 'fixed'.");return ScrollScene}if(_pin){if(_pin===element){return ScrollScene}else{ScrollScene.removePin()}}_pin=element;_pin.parent().hide();var inFlow=_pin.css("position")!="absolute",pinCSS=_pin.css(["display","top","left","bottom","right"]),sizeCSS=_pin.css(["width","height"]);_pin.parent().show();var spacer=$("<div></div>").addClass(settings.spacerClass).css(pinCSS).data("ScrollMagicPinSpacer",true).css({position:inFlow?"relative":"absolute","margin-left":"auto","margin-right":"auto","box-sizing":"content-box","-moz-box-sizing":"content-box","-webkit-box-sizing":"content-box"});if(!inFlow&&settings.pushFollowers){log(2,"WARNING: If the pinned element is positioned absolutely pushFollowers is disabled.");settings.pushFollowers=false}_pinOptions={spacer:spacer,relSize:{width:sizeCSS.width.slice(-1)==="%",height:sizeCSS.height.slice(-1)==="%"},pushFollowers:settings.pushFollowers,inFlow:inFlow,origStyle:_pin.attr("style")};if(_pinOptions.relSize.width){spacer.css("width",sizeCSS.width)}if(_pinOptions.relSize.height){spacer.css("height",sizeCSS.height)}_pin.before(spacer).appendTo(spacer).css({position:inFlow?"relative":"absolute",top:"auto",left:"auto",bottom:"auto",right:"auto"});$(window).on("scroll resize",updatePinInContainer);log(3,"added pin");updatePinState();return ScrollScene};this.removePin=function(reset){if(_pin){if(reset||!_parent){_pin.insertBefore(_pinOptions.spacer).attr("style",_pinOptions.origStyle);_pinOptions.spacer.remove()}else{if(_state==="DURING"){updatePinState(true)}}$(window).off("scroll resize",updatePinInContainer);_pin=undefined;log(3,"removed pin (reset: "+(reset?"true":"false")+")")}return ScrollScene};this.addTo=function(controller){if(_parent!=controller){if(_parent){_parent.removeScene(ScrollScene)}_parent=controller;checkOptionsValidity();updateScrollOffset();updatePinSpacerSize();_parent.info("container").on("resize",updateRelativePinSpacer);log(3,"added "+NAMESPACE+" to controller");controller.addScene(ScrollScene);ScrollScene.update();return ScrollScene}};this.enabled=function(newState){if(!arguments.length){return _enabled}else if(_enabled!=newState){_enabled=!!newState;ScrollScene.update(true)}return ScrollScene};this.remove=function(){if(_parent){_parent.info("container").off("resize",updateRelativePinSpacer);var tmpParent=_parent;_parent=undefined;log(3,"removed "+NAMESPACE+" from controller");tmpParent.removeScene(ScrollScene)}return ScrollScene};this.destroy=function(reset){this.removeTween(reset);this.removePin(reset);this.remove();this.off("start end enter leave progress change update change.internal progress.internal");log(3,"destroyed "+NAMESPACE+" (reset: "+(reset?"true":"false")+")");return null};this.on=function(name,callback){if($.isFunction(callback)){var names=$.trim(name).toLowerCase().replace(/(\w+)\.(\w+)/g,"$1."+NAMESPACE+"_$2").replace(/( |^)(\w+)( |$)/g,"$1$2."+NAMESPACE+"$3");$(ScrollScene).on(names,callback)}else{log(1,"ERROR calling method 'on()': Supplied argument is not a valid callback!")}return ScrollScene};this.off=function(name,callback){var names=$.trim(name).toLowerCase().replace(/(\w+)\.(\w+)/g,"$1."+NAMESPACE+"_$2").replace(/( |^)(\w+)( |$)/g,"$1$2."+NAMESPACE+"$3");$(ScrollScene).off(names,callback);return ScrollScene};this.trigger=function(name,vars){log(3,"event fired:",name,"->",vars);var event={type:$.trim(name).toLowerCase(),target:ScrollScene};if($.isPlainObject(vars)){event=$.extend({},vars,event)}$(ScrollScene).trigger(event);return ScrollScene};construct();return ScrollScene};var console=window.console=window.console||{},loglevels=["error","warn","log"];if(!console["log"]){console.log=$.noop}$.each(loglevels,function(index,method){if(!console[method]){console[method]=console.log}});var debug=function(loglevel){if(loglevel>loglevels.length||loglevel<=0)loglevel=loglevels.length;var now=new Date,time=("0"+now.getHours()).slice(-2)+":"+("0"+now.getMinutes()).slice(-2)+":"+("0"+now.getSeconds()).slice(-2)+":"+("00"+now.getMilliseconds()).slice(-3),method=loglevels[loglevel-1],args=Array.prototype.splice.call(arguments,1),func=Function.prototype.bind.call(console[method],console);args.unshift(time);func.apply(console,args)};var getOffset=function($elem,relativeToViewport){var offset={top:0,left:0},elem=$elem[0];if(elem){if(elem.getBoundingClientRect){var rect=elem.getBoundingClientRect();offset.top=rect.top;offset.left=rect.left;if(!relativeToViewport){offset.top+=$(document).scrollTop();offset.left+=$(document).scrollLeft()}}else{offset=$elem.offset()||offset;if(relativeToViewport){offset.top-=$(document).scrollTop();offset.left-=$(document).scrollLeft()}}}return offset}})(jQuery);